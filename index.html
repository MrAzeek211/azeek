<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>UU Nasional Azeek</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    input, button {
      padding: 8px;
      margin: 5px 0;
      width: 100%;
      box-sizing: border-box;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
    }
    th {
      background: #222;
      color: white;
    }
    button {
      cursor: pointer;
    }
    .aksi button {
      margin-right: 5px;
    }
  </style>
</head>
<body>

<h1>UU Nasional Azeek</h1>

<h3>Import CSV</h3>
<input type="file" id="csvInput" accept=".csv">

<h3>Form Pasal</h3>
<input id="pasal" placeholder="Pasal">
<input id="keterangan" placeholder="Keterangan">
<input id="hukuman" type="number" placeholder="Hukuman (bulan)">
<input id="denda" type="number" placeholder="Denda">
<button id="simpanBtn">Simpan</button>

<table>
  <thead>
    <tr>
      <th>Pasal</th>
      <th>Keterangan</th>
      <th>Hukuman</th>
      <th>Denda</th>
      <th>Aksi</th>
    </tr>
  </thead>
  <tbody id="tbody"></tbody>
</table>

<script>
  let data = [];
  let editIndex = null;

  const csvInput = document.getElementById("csvInput");
  const tbody = document.getElementById("tbody");

  csvInput.addEventListener("change", function (e) {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function () {
      const lines = reader.result.split(/\r?\n/);
      data = [];

      for (let i = 1; i < lines.length; i++) {
        const line = lines[i].trim();
        if (!line) continue;

        const parts = line.split(",");
        if (parts.length < 4) continue;

        data.push({
          pasal: parts[0].trim(),
          keterangan: parts[1].trim(),
          hukuman: parts[2].trim(),
          denda: parts[3].trim()
        });
      }
      renderTable();
    };
    reader.readAsText(file);
  });

  function renderTable() {
    tbody.innerHTML = "";
    data.forEach((row, index) => {
      const tr = document.createElement("tr");

      tr.innerHTML = `
        <td>${row.pasal}</td>
        <td>${row.keterangan}</td>
        <td>${row.hukuman}</td>
        <td>${row.denda}</td>
        <td class="aksi">
          <button class="edit">Edit</button>
          <button class="hapus">Hapus</button>
        </td>
      `;

      tr.querySelector(".edit").addEventListener("click", () => editData(index));
      tr.querySelector(".hapus").addEventListener("click", () => hapusData(index));

      tbody.appendChild(tr);
    });
  }

  function editData(index) {
    const r = data[index];
    document.getElementById("pasal").value = r.pasal;
    document.getElementById("keterangan").value = r.keterangan;
    document.getElementById("hukuman").value = r.hukuman;
    document.getElementById("denda").value = r.denda;
    editIndex = index;
  }

  function hapusData(index) {
    data.splice(index, 1);
    renderTable();
  }

  document.getElementById("simpanBtn").addEventListener("click", function () {
    const obj = {
      pasal: pasal.value,
      keterangan: keterangan.value,
      hukuman: hukuman.value,
      denda: denda.value
    };

    if (editIndex !== null) {
      data[editIndex] = obj;
      editIndex = null;
    } else {
      data.push(obj);
    }

    pasal.value = "";
    keterangan.value = "";
    hukuman.value = "";
    denda.value = "";

    renderTable();
  });
</script>

</body>
</html>
