<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>UU Nasional Azeek</title>

<style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
}
table {
  border-collapse: collapse;
  width: 100%;
}
th, td {
  border: 1px solid #ccc;
  padding: 8px;
}
th {
  background: #f2f2f2;
}
</style>
</head>

<body>

<h2>UU Nasional Azeek</h2>

<table>
<thead>
<tr>
  <th>Pilih</th>
  <th>Pasal</th>
  <th>Deskripsi</th>
  <th>Denda</th>
  <th>Hukuman</th>
</tr>
</thead>
<tbody id="dataPasal"></tbody>
</table>

<h3>Ringkasan</h3>
<p><b>Pasal Terpilih:</b> <span id="pasalList">-</span></p>
<p><b>Total Hukuman:</b> <span id="totalBulan">0</span> BULAN</p>
<p><b>Total Denda:</b> $<span id="totalDenda">0</span></p>

<script>
let data = [];

fetch("uu_nasional.csv")
  .then(res => {
    if (!res.ok) throw new Error("CSV tidak ditemukan");
    return res.text();
  })
  .then(text => {
    const rows = text.trim().split("\n").slice(1);

    rows.forEach(row => {
      const c = row.split(",");

      data.push({
        pasal: c[0],
        deskripsi: c[1],
        denda: parseInt(c[2].replace("$","")),
        bulan: parseInt(c[3].replace(" BULAN",""))
      });
    });

    render();
  })
  .catch(err => {
    document.body.innerHTML += "<p style='color:red'>Gagal load CSV</p>";
  });

function render() {
  const tbody = document.getElementById("dataPasal");
  tbody.innerHTML = "";

  data.forEach((d, i) => {
    tbody.innerHTML += `
      <tr>
        <td><input type="checkbox" onchange="hitung()"></td>
        <td>${d.pasal}</td>
        <td>${d.deskripsi}</td>
        <td>$${d.denda}</td>
        <td>${d.bulan} BULAN</td>
      </tr>
    `;
  });
}

function hitung() {
  let totalBulan = 0;
  let totalDenda = 0;
  let pasal = [];

  document.querySelectorAll("tbody tr").forEach((row, i) => {
    if (row.querySelector("input").checked) {
      totalBulan += data[i].bulan;
      totalDenda += data[i].denda;
      pasal.push(data[i].pasal);
    }
  });

  document.getElementById("totalBulan").textContent = totalBulan;
  document.getElementById("totalDenda").textContent = totalDenda;
  document.getElementById("pasalList").textContent =
    pasal.length ? pasal.join(", ") : "-";
}
</script>

</body>
</html>
